{"version":3,"sources":["clojure_rum_start/client/client.cljs"],"mappings":";AAGA,8CAAA,9CAAMA,oGAAaC;AAAnB,AACM,UAAA,NAAMC;cAAN,2CAAA,oDAAA,OAAA,uDAAA,OAAA,iGAAA,2DAAA,2CAAA,eAAA,pYACMC,oOAEkB,AAACC,eAAkB,AAACC,qBAAQJ;AAHpD,OAKS,AAACK,MAASJ,IAAI,AAACG,qBAAQF,tCACvB,sDAAA,WAAAI;AAAA,AAAS,mDAAAA,5CAACC;;;AAGzB,gDAAA,hDAAMC,wGAAeR,KAAKS;AAA1B,AACM,IAAMR,MAAI,CAAA,uFAAgDQ;cAA1D,2CAAA,oDAAA,OAAA,uDAAA,QAAA,iGAAA,2DAAA,2CAAA,eAAA,rYACMP,qOAGkB,AAACC,eAAkB,AAACC,qBAAQJ;AAJpD,OAOS,AAACK,MAASJ,IAAI,AAACG,qBAAQF,tCACvB,sDAAA,WAAAQ;AAAA,AAAS,mDAAAA,5CAACH;;;AACzB,0CAAA,1CAAMI,2FAAQF;AAAd,AACM,IAAMR,MAAI,CAAA,0EAAmCQ;cAA7C,2CAAA,oDAAA,OAAA,uDAAA,SAAA,2DAAA,2CAAA,eAAA,rSACMP;AADN,OAKS,AAACG,MAASJ,IAAI,AAACG,qBAAQF,tCACvB,sDAAA,WAAAU;AAAA,AAAS,mDAAAA,5CAACL;;;AAEzB,4CAAA,5CAAMM,gGAAWC;AAAjB,OACU,MAAA,8BAAA,2CAAA,oDAAA,OAAA,uDAAA,jMAACT,AAED,qNAAO,WAAKU,vOACZ;AADO,AAAe,OAAOA;SACtB,WAAKC;AAAL,AAAW,IAAMC,WAAS,iHAAA,2EAAA,5LAACC,0DAAQF;IAClBG,mBAAiB,4CAAA,WAAAC,vDAACC;AAAD,AAAM,qDAAAD,iBAAA,/DAACE,iIAAoB,AAACC,0CAAY,AAAA,gGAAAH;GAAkBH;AADjF,AAEK,OAACO,sBAAOV,MAAMK","names":["clojure-rum-start.client.client/create-todo","todo","url","options","js/JSON.stringify","cljs.core/clj->js","js/fetch","p1__15265#","clojure-rum-start.util.common/error-handler","clojure-rum-start.client.client/update-status","id","p1__15266#","clojure-rum-start.client.client/delete","p1__15267#","clojure-rum-start.client.client/fetch-all","todos","response","json","clj-json","cljs.core.js__GT_clj","todos-with-dates","p1__15268#","cljs.core.map","cljs.core.assoc","clojure-rum-start.util.parser/format-date","cljs.core/reset!"],"sourcesContent":["(ns clojure-rum-start.client.client\n  (:require [clojure-rum-start.util.common :refer [error-handler]]\n            [clojure-rum-start.util.parser :refer [format-date]]))\n(defn create-todo [todo]\n      (let [url \"http://localhost:3000/todo\"\n            options {:mode    \"cors\"\n                     :method  \"POST\"\n                     :body    (js/JSON.stringify (clj->js todo))\n                     :headers {\"Content-Type\" \"application/json\"}}]\n           (-> (js/fetch url (clj->js options))\n               (.catch #(error-handler %)))))\n\n\n(defn update-status [todo id]\n      (let [url (str \"http://localhost:3000/todo/changeStatus/\" id)\n            options {\n                     :mode    \"cors\"\n                     :method  \"PATCH\"\n                     :body    (js/JSON.stringify (clj->js todo))\n                     :headers {\"Content-Type\" \"application/json\"}\n                     }]\n           (-> (js/fetch url (clj->js options))\n               (.catch #(error-handler %)))))\n(defn delete [id]\n      (let [url (str \"http://localhost:3000/todo/\" id)\n            options {:mode    \"cors\"\n                     :method  \"DELETE\"\n                     :headers {\"Content-Type\" \"application/json\"}\n                     }]\n           (-> (js/fetch url (clj->js options))\n               (.catch #(error-handler %)))))\n\n(defn fetch-all [todos]\n      (-> (js/fetch \"http://localhost:3000/todos\" {:mode   \"cors\"\n                                                   :method \"GET\"})\n          (.then (fn [response] (.json response)))\n          (.then (fn [json] (let [clj-json (js->clj json :keywordize-keys true)\n                                  todos-with-dates (map #(assoc % :limit_date (format-date (:limit_date %))) clj-json)]\n                                 (reset! todos todos-with-dates))))))"]}